<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>simple_decimal - Precise Decimal Arithmetic for Eiffel</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/png" href="images/logo.png">
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="images/logo.png" alt="simple_* logo" class="logo">
        </div>
        <h1>simple_decimal</h1>
        <p class="tagline">Precise Decimal Arithmetic for Financial Calculations</p>
        <div class="badges">
            <span class="badge badge-version">v1.0.0</span>
            <span class="badge badge-license">MIT</span>
            <span class="badge badge-dbc">DbC Enforced</span>
        </div>
    </header>

    <nav>
        <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="user-guide.html">User Guide</a></li>
            <li><a href="api-reference.html">API Reference</a></li>
            <li><a href="architecture.html">Architecture</a></li>
            <li><a href="cookbook.html">Cookbook</a></li>
            <li><a href="https://github.com/simple-eiffel/simple_decimal">GitHub</a></li>
        </ul>
    </nav>

    <main>
        <section id="overview">
            <h2>Overview</h2>
            <p>
                <strong>simple_decimal</strong> is a clean wrapper over Gobo's MA_DECIMAL library that provides
                arbitrary-precision decimal arithmetic for Eiffel. Perfect for <strong>financial calculations</strong>
                where binary floating-point errors are unacceptable.
            </p>

            <div class="highlight-box">
                <h3>The Problem with Floating-Point</h3>
                <p>Binary floating-point (REAL, DOUBLE) cannot represent many decimal fractions exactly:</p>
<pre><code><span class="comment">-- DOUBLE fails silently!</span>
io.put_double (0.1 + 0.2)  <span class="comment">-- Outputs: 0.30000000000000004  WRONG!</span></code></pre>
                <p>This causes real-world problems: financial calculations that don't balance, prices that display
                incorrectly, tax calculations off by a penny, and cumulative errors in accounting systems.</p>
            </div>

            <div class="highlight-box success">
                <h3>The Solution</h3>
<pre><code><span class="keyword">local</span>
    a, b, total: <span class="type">SIMPLE_DECIMAL</span>
<span class="keyword">do</span>
    <span class="keyword">create</span> a.make (<span class="string">"0.1"</span>)
    <span class="keyword">create</span> b.make (<span class="string">"0.2"</span>)
    total := a + b
    print (total.out)  <span class="comment">-- Outputs: 0.3  CORRECT!</span>
<span class="keyword">end</span></code></pre>
            </div>
        </section>

        <section id="quick-start">
            <h2>Quick Start</h2>

            <h3>Installation</h3>
            <ol>
                <li>Set the environment variable:
<pre><code>export SIMPLE_DECIMAL=/path/to/simple_decimal</code></pre>
                </li>
                <li>Add to your ECF file:
<pre><code>&lt;library name="simple_decimal" location="$SIMPLE_DECIMAL/simple_decimal.ecf"/&gt;</code></pre>
                </li>
            </ol>

            <h3>Basic Usage</h3>
<pre><code><span class="keyword">class</span>
    <span class="type">INVOICE_CALCULATOR</span>

<span class="keyword">feature</span> <span class="comment">-- Calculation</span>

    calculate_total (subtotal_str, tax_rate_str: <span class="type">STRING</span>): <span class="type">STRING</span>
            <span class="comment">-- Calculate total with tax, returning formatted currency</span>
        <span class="keyword">local</span>
            subtotal, tax_rate, tax, total: <span class="type">SIMPLE_DECIMAL</span>
        <span class="keyword">do</span>
            <span class="keyword">create</span> subtotal.make (subtotal_str)
            <span class="keyword">create</span> tax_rate.make (tax_rate_str)

            <span class="comment">-- Calculate tax: subtotal * (rate / 100)</span>
            tax := (subtotal * tax_rate.from_percentage).round_cents
            total := subtotal + tax

            Result := total.to_currency_string
        <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>

            <p><strong>Result:</strong> <code>calculate_total ("47.99", "8.25")</code> returns <code>"$51.95"</code></p>
        </section>

        <section id="features">
            <h2>Key Features</h2>

            <div class="feature-grid">
                <div class="feature-card">
                    <h3>Arbitrary Precision</h3>
                    <p>No floating-point representation errors. 0.1 + 0.2 = 0.3 exactly.</p>
                </div>

                <div class="feature-card">
                    <h3>Financial Operations</h3>
                    <p>Currency formatting, percentages, tax calculations, bill splitting with penny-perfect accuracy.</p>
                </div>

                <div class="feature-card">
                    <h3>Multiple Rounding Modes</h3>
                    <p>Banker's rounding (half-even), round up, round down, ceiling, floor, truncate.</p>
                </div>

                <div class="feature-card">
                    <h3>Immutable Operations</h3>
                    <p>All arithmetic returns new values. Thread-safe, predictable, no side effects.</p>
                </div>

                <div class="feature-card">
                    <h3>Smart Parsing</h3>
                    <p>Handles "$1,234.56", "1234.56", "-$99.99" automatically.</p>
                </div>

                <div class="feature-card">
                    <h3>Design by Contract</h3>
                    <p>Full preconditions, postconditions, and class invariants throughout.</p>
                </div>
            </div>
        </section>

        <section id="documentation">
            <h2>Documentation</h2>
            <ul class="doc-links">
                <li><a href="user-guide.html"><strong>User Guide</strong></a> - Complete tutorial with examples</li>
                <li><a href="api-reference.html"><strong>API Reference</strong></a> - Full feature documentation</li>
                <li><a href="architecture.html"><strong>Architecture</strong></a> - Internal design and rationale</li>
                <li><a href="cookbook.html"><strong>Cookbook</strong></a> - Real-world recipes and patterns</li>
            </ul>
        </section>

        <section id="standards">
            <h2>Standards Compliance</h2>
            <p>simple_decimal is built on Gobo's MA_DECIMAL which implements:</p>
            <ul>
                <li><strong>General Decimal Arithmetic Specification</strong> - IBM's decimal arithmetic standard</li>
                <li><strong>IEEE 754-2008</strong> - Standard for floating-point arithmetic (decimal64/decimal128)</li>
            </ul>
            <p>This means your calculations follow the same rules used by financial institutions worldwide.</p>
        </section>
    </main>

    <footer>
        <p>Part of the <a href="https://github.com/simple-eiffel">simple_*</a> ecosystem of focused, single-purpose Eiffel libraries.</p>
        <p>&copy; 2025 Larry Rix. MIT License.</p>
    </footer>
</body>
</html>
